   /*
    *  Simple light-weight javascript templating engine (part of php templating engine)
    *  @author: Nikos M.  http://nikos-web-development.netai.net/
    *  https://github.com/foo123/Contemplate
    *  version 0.3.2
    *
    *  @inspired by : Simple JavaScript Templating, John Resig - http://ejohn.org/ - MIT Licensed
    *  http://ejohn.org/blog/javascript-micro-templating/
    *
    */
(function(){function v(a){var b,d=function(a){a=/\W*function\s+([\w\$]+)\s*\(/.exec(a);if(!a)return"(Anonymous)";return a[1]};if(!a||typeof a!=="object")return!1;this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};b=this.php_js.ini["phpjs.objectsAsArrays"];return function(a){if(!a||typeof a!=="object"||typeof a.length!=="number")return!1;var b=a.length;a[a.length]="bogus";if(b!==a.length)return a.length-=1,!0;delete a[a.length];return!1}(a)||(!b||parseInt(b.local_value,10)!==0&&(!b.local_value.toLowerCase||
b.local_value.toLowerCase()!=="off"))&&Object.prototype.toString.call(a)==="[object Object]"&&d(a.constructor)==="Object"}function D(a){var b,d={};if(a&&typeof a==="object"&&a.change_key_case)return a.flip();for(b in a)a.hasOwnProperty(b)&&(d[a[b]]=b);return d}function E(a){var b=[],d="";if(a&&typeof a==="object"&&a.change_key_case)return a.values();for(d in a)b[b.length]=a[d];return b}function F(a,b){var d,c=0,e=0;a+="";b?(b+="",d=b.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")):d=" \n\r\t\u000c\u000b\u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";
c=a.length;for(e=0;e<c;e++)if(d.indexOf(a.charAt(e))===-1){a=a.substring(e);break}c=a.length;for(e=c-1;e>=0;e--)if(d.indexOf(a.charAt(e))===-1){a=a.substring(0,e+1);break}return d.indexOf(a.charAt(0))===-1?a:""}function w(){return Math.floor((new Date).getTime()/1E3)}function H(a,b){var d,c,e=/\\?([a-z])/gi,m,g=function(a,b){a=a.toString();return a.length<b?g("0"+a,b,"0"):a},f=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September",
"October","November","December"];m=function(a,b){return c[a]?c[a]():b};c={d:function(){return g(c.j(),2)},D:function(){return c.l().slice(0,3)},j:function(){return d.getDate()},l:function(){return f[c.w()]+"day"},N:function(){return c.w()||7},S:function(){var a=c.j();return a<4|a>20&&(["st","nd","rd"][a%10-1]||"th")},w:function(){return d.getDay()},z:function(){var a=new Date(c.Y(),c.n()-1,c.j()),b=new Date(c.Y(),0,1);return Math.round((a-b)/864E5)},W:function(){var a=new Date(c.Y(),c.n()-1,c.j()-
c.N()+3),b=new Date(a.getFullYear(),0,4);return g(1+Math.round((a-b)/864E5/7),2)},F:function(){return f[6+c.n()]},m:function(){return g(c.n(),2)},M:function(){return c.F().slice(0,3)},n:function(){return d.getMonth()+1},t:function(){return(new Date(c.Y(),c.n(),0)).getDate()},L:function(){var a=c.Y();return a%4===0&a%100!==0|a%400===0},o:function(){var a=c.n(),b=c.W();return c.Y()+(a===12&&b<9?1:a===1&&b>9?-1:0)},Y:function(){return d.getFullYear()},y:function(){return c.Y().toString().slice(-2)},
a:function(){return d.getHours()>11?"pm":"am"},A:function(){return c.a().toUpperCase()},B:function(){var a=d.getUTCHours()*3600,b=d.getUTCMinutes()*60,c=d.getUTCSeconds();return g(Math.floor((a+b+c+3600)/86.4)%1E3,3)},g:function(){return c.G()%12||12},G:function(){return d.getHours()},h:function(){return g(c.g(),2)},H:function(){return g(c.G(),2)},i:function(){return g(d.getMinutes(),2)},s:function(){return g(d.getSeconds(),2)},u:function(){return g(d.getMilliseconds()*1E3,6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)";
},I:function(){var a=new Date(c.Y(),0),b=Date.UTC(c.Y(),0),d=new Date(c.Y(),6),e=Date.UTC(c.Y(),6);return a-b!==d-e?1:0},O:function(){var a=d.getTimezoneOffset(),b=Math.abs(a);return(a>0?"-":"+")+g(Math.floor(b/60)*100+b%60,4)},P:function(){var a=c.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return-d.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(e,m)},r:function(){return"D, d M Y H:i:s O".replace(e,m)},U:function(){return d/1E3|0}};this.date=
function(a,b){d=b===void 0?new Date:b instanceof Date?new Date(b):new Date(b*1E3);return a.replace(e,m)};return this.date(a,b)}function I(a,b,d){var c,e,m=/\\?([a-z])/gi,g,f=function(a,b){a=a.toString();return a.length<b?f("0"+a,b,"0"):a},i=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"];g=function(a,b){return e[a]?e[a]():b};e={d:function(){return f(e.j(),2)},D:function(){var b=i[e.w()];
return a[b]?a[b]:b},j:function(){return c.getDate()},l:function(){var b=i[e.w()]+"day";return a[b]?a[b]:b},N:function(){return e.w()||7},S:function(){var b=e.j(),c=["st","nd","rd"][b%10-1]||"th",c=a[c]?a[c]:c;return b<4|b>20&&c},w:function(){return c.getDay()},z:function(){var a=new Date(e.Y(),e.n()-1,e.j()),b=new Date(e.Y(),0,1);return Math.round((a-b)/864E5)},W:function(){var a=new Date(e.Y(),e.n()-1,e.j()-e.N()+3),b=new Date(a.getFullYear(),0,4);return f(1+Math.round((a-b)/864E5/7),2)},F:function(){var b=
i[6+e.n()];return a[b]?a[b]:b},m:function(){return f(e.n(),2)},M:function(){var b=i[6+e.n()].slice(0,3);return a[b]?a[b]:b},n:function(){return c.getMonth()+1},t:function(){return(new Date(e.Y(),e.n(),0)).getDate()},L:function(){var a=e.Y();return a%4===0&a%100!==0|a%400===0},o:function(){var a=e.n(),b=e.W();return e.Y()+(a===12&&b<9?1:a===1&&b>9?-1:0)},Y:function(){return c.getFullYear()},y:function(){return e.Y().toString().slice(-2)},a:function(){var b=a.am?a.am:"am",d=a.pm?a.pm:"pm";return c.getHours()>
11?d:b},A:function(){return e.a().toUpperCase()},B:function(){var a=c.getUTCHours()*3600,b=c.getUTCMinutes()*60,d=c.getUTCSeconds();return f(Math.floor((a+b+d+3600)/86.4)%1E3,3)},g:function(){return e.G()%12||12},G:function(){return c.getHours()},h:function(){return f(e.g(),2)},H:function(){return f(e.G(),2)},i:function(){return f(c.getMinutes(),2)},s:function(){return f(c.getSeconds(),2)},u:function(){return f(c.getMilliseconds()*1E3,6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)";
},I:function(){var a=new Date(e.Y(),0),b=Date.UTC(e.Y(),0),c=new Date(e.Y(),6),d=Date.UTC(e.Y(),6);return a-b!==c-d?1:0},O:function(){var a=c.getTimezoneOffset(),b=Math.abs(a);return(a>0?"-":"+")+f(Math.floor(b/60)*100+b%60,4)},P:function(){var a=e.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return-c.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(m,g)},r:function(){return"D, d M Y H:i:s O".replace(m,g)},U:function(){return c/1E3|0}};this.date=
function(a,b){c=b===void 0?new Date:b instanceof Date?new Date(b):new Date(b*1E3);return a.replace(m,g)};return this.date(b,d)}var x=this,f;if(!(typeof exports=="undefined"&&this.Contemplate)){var G=0,y={},u={},z={},r={},A="<%",n="%>",q=0,B=0,t=0,J=["if","elseif","else","endif","for","elsefor","endfor","include","template","htmlselect","htmltable"],C=["q","dq","l","s","n","f","concat","ltrim","rtrim","trim","sprintf","now","date","ldate"],h={functions:null,controlConstructs:null,forExpr:null,quotes:null,
specials:null,replacements:null},K=function(a,b){var d=null;this.id=null;if(a)this.id=a,d=b;this.setId=function(a){if(a)this.id=a;return this};this.render=function(a){if(d)return d(a);return""}};f={CACHE_TO_DISK_NONE:0,CACHE_TO_DISK_AUTOUPDATE:2,CACHE_TO_DISK_NOUPDATE:4,init:function(){h.controlConstructs=RegExp("\\t\\s*%("+J.join("|")+")\\b\\s*\\((.*)\\)","g");h.forExpr=/^\s*\$([a-z0-9_]+?)\s* as \s*\$([a-z0-9_]+?)\s*=>\s*\$([a-z0-9_]+)\s*$/i;h.quotes=/'/g;h.specials=/[\r\t]/g;h.replacements=RegExp("\\t\\s*(.*?)\\s*"+
n,"g");C.length&&(h.functions=RegExp("%("+C.join("|")+")\\b","g"))},setLocaleStrings:function(a){r=f.merge(r,a)},setTemplateSeparators:function(a,b){a&&(A=a);b&&(n=b);b&&(h.replacements=RegExp("\\t\\s*(.*?)\\s*"+n,"g"))},setCacheDir:function(a){$__cacheDir=a},setCacheMode:function(){G=f.CACHE_TO_DISK_NONE},add:function(a){u=f.merge(u,a)},tpl:function(a,b){y[a]||(y[a]=f.getCachedTemplate(a));var d=y[a];return b?d.render(b):d},t_if:function(a){B++;return"'; if ("+a+") { "},t_elseif:function(a){return"'; } else if ("+
a+") { "},t_else:function(){return"'; } else { "},t_elsefor:function(){t--;return"'; } } } else { "},t_endif:function(){B--;return"'; } "},t_for:function(a){q++;t++;var a=a.match(h.forExpr),b="$"+a[1],d="$"+a[2];return"'; if ("+b+" && Object.keys("+b+").length) { for (var "+d+" in "+b+") { if (Contemplate.hasOwn("+b+", "+d+")) { var "+("$"+a[3])+"="+b+"["+d+"]; "},t_endfor:function(){if(t==q)return q--,t--,"'; } } } ";q--;return"'; } "},t_include:function(a){z[a]||(z[a]=" "+f.parse(f.getTemplateContents(a))+
"'; ");return z[a]},t_template:function(a){var a=a.split(","),b=F(a.shift()),a=a.join(",").split("' + \"\\n\" + '").join("").split("=>").join(":");return"'+ Contemplate.tpl(\""+b+'", '+a+"); "},t_table:function(a){return"'+ Contemplate.htmltable("+a.split("' + \"\\n\" + '").join("").split("=>").join(":")+"); "},t_select:function(a){return"'+ Contemplate.htmlselect("+a.split("' + \"\\n\" + '").join("").split("=>").join(":")+"); "},q:function(a){return"'"+a+"'"},dq:function(a){return'"'+a+'"'},s:function(a){return String(a)},
n:function(a){return parseInt(a,10)},f:function(a){return parseFloat(a,10)},concat:function(){return Array.prototype.slice.call(arguments).join("")},trim:F,ltrim:function(a,b){b=!b?" \\s\u00a0":(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");return(a+"").replace(RegExp("^["+b+"]+","g"),"")},rtrim:function(a,b){b=!b?" \\s\u00a0":(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1");return(a+"").replace(RegExp("["+b+"]+$","g"),"")},sprintf:function(){var a=arguments,b=0,d=function(a,b,
c,d){c||(c=" ");b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+b:b+a},c=function(a,b,c,e,f,j){var k=e-a.length;k>0&&(a=c||!f?d(a,e,j,c):a.slice(0,b.length)+d("",k,"0",!0)+a.slice(b.length));return a},e=function(a,b,e,f,l,j,k){a>>>=0;e=e&&a&&{2:"0b",8:"0",16:"0x"}[b]||"";a=e+d(a.toString(b),j||0,"0",!1);return c(a,e,f,l,k)};return a[b++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(f,g,h,i,l,j,k){var o,n;if(f=="%%")return"%";var p=
!1;n="";var s=l=!1;o=" ";for(var r=h.length,q=0;h&&q<r;q++)switch(h.charAt(q)){case " ":n=" ";break;case "+":n="+";break;case "-":p=!0;break;case "'":o=h.charAt(q+1);break;case "0":l=!0;break;case "#":s=!0}i=i?i=="*"?+a[b++]:i.charAt(0)=="*"?+a[i.slice(1,-1)]:+i:0;i<0&&(i=-i,p=!0);if(!isFinite(i))throw Error("sprintf: (minimum-)width must be finite");j=j?j=="*"?+a[b++]:j.charAt(0)=="*"?+a[j.slice(1,-1)]:+j:"fFeE".indexOf(k)>-1?6:k=="d"?0:void 0;g=g?a[g.slice(0,-1)]:a[b++];switch(k){case "s":return k=
String(g),j!=null&&(k=k.slice(0,j)),c(k,"",p,i,l,o);case "c":return k=String.fromCharCode(+g),j!=null&&(k=k.slice(0,j)),c(k,"",p,i,l,void 0);case "b":return e(g,2,s,p,i,j,l);case "o":return e(g,8,s,p,i,j,l);case "x":return e(g,16,s,p,i,j,l);case "X":return e(g,16,s,p,i,j,l).toUpperCase();case "u":return e(g,10,s,p,i,j,l);case "i":case "d":return o=+g||0,o=Math.round(o-o%1),f=o<0?"-":n,g=f+d(String(Math.abs(o)),j,"0",!1),c(g,f,p,i,l);case "e":case "E":case "f":case "F":case "g":case "G":return o=+g,
f=o<0?"-":n,n=["toExponential","toFixed","toPrecision"]["efg".indexOf(k.toLowerCase())],k=["toString","toUpperCase"]["eEfFgG".indexOf(k)%2],g=f+Math.abs(o)[n](j),c(g,f,p,i,l)[k]();default:return f}})},now:function(){return w()},date:function(a,b){b||(b=w());return H(a,b)},ldate:function(a,b){b||(b=w());return I(r,a,b)},locale:function(a){return r[a]?r[a]:a},l:function(a){return f.locale(a)},htmltable:function(a,b){var b=b||{},d="",c="",e="",m="",g,c=[],h,i,l,e=!1,d="<table";b.id&&(d+=" id='"+b.id+
"'");b["class"]&&(d+=" class='"+b["class"]+"'");b.style&&(d+=" style='"+b.style+"'");if(b.data)for(g in b.data)f.hasOwn(b.data,g)&&(d+=" data-"+g+"='"+b.data[g]+"'");d+=">";c="";if(b.header||b.footer){m=[];c="";if(a&&typeof a==="object"&&a.change_key_case)m=a.keys(void 0,void 0);else for(c in a)a.hasOwnProperty(c)&&(m[m.length]=c);c="<td>"+m.join("</td><td>")+"</td>"}e="";b.header&&(e="<thead><tr>"+c+"</tr></thead>");m="";b.footer&&(m="<tfoot><tr>"+c+"</tr></tfoot>");d+=e;c=[];e=E(a);for(h in e)if(f.hasOwn(e,
h)){g=e[h];v(g)||(g=[g]);l=E(g);i=0;for(g=l.length;i<g;i++)c[i]||(c[i]=Array(g)),c[i][h]=l[i]}i=b.odd?b.odd:"odd";l=b.even?b.even:"even";e=!1;h=0;for(g=c.length;h<g;h++)d+=e?"<tr class='"+i+"'><td>"+c[h].join("</td><td>")+"</td></tr>":"<tr class='"+l+"'><td>"+c[h].join("</td><td>")+"</td></tr>",e=!e;delete null;d+=m;d+="</table>";return d},htmlselect:function(a,b){var b=b||{},d="",c,e,h,g,d="<select";b.multiple&&(d+=" multiple");b.disabled&&(d+=" disabled='disabled'");b.name&&(d+=" name='"+b.name+
"'");b.id&&(d+=" id='"+b.id+"'");b["class"]&&(d+=" class='"+b["class"]+"'");b.style&&(d+=" style='"+b.style+"'");if(b.data)for(c in b.data)f.hasOwn(b.data,c)&&(d+=" data-"+c+"='"+b.data[c]+"'");d+=">";b.selected?(v(b.selected)||(b.selected=[b.selected]),b.selected=D(b.selected)):b.selected={};if(b.optgroups)v(b.optgroups)||(b.optgroups=[b.optgroups]),b.optgroups=D(b.optgroups);f.log(b.selected);for(c in a)if(f.hasOwn(a,c))if(h=a[c],b.optgroups&&b.optgroups[c]){d+="<optgroup label='"+c+"'>";for(e in h)f.hasOwn(h,
e)&&(g=h[e],b.use_key?g=e:b.use_value&&(e=g),d+=f.hasOwn(b.selected,e)?"<option value='"+e+"' selected='selected'>"+g+"</option>":"<option value='"+e+"'>"+g+"</option>");d+="</optgroup>"}else b.use_key?h=c:b.use_value&&(c=h),d+=b.selected[c]?"<option value='"+c+"' selected='selected'>"+h+"</option>":"<option value='"+c+"'>"+h+"</option>";d+="</select>";return d},doControlConstruct:function(a){if(a[1])switch(a[1]){case "if":return f.t_if(a[2]);case "elseif":return f.t_elseif(a[2]);case "else":return f.t_else(a[2]);
case "endif":return f.t_endif(a[2]);case "for":return f.t_for(a[2]);case "elsefor":return f.t_elsefor(a[2]);case "endfor":return f.t_endfor(a[2]);case "template":return f.t_template(a[2]);case "embed":case "include":return f.t_include(a[2]);case "htmltable":return f.t_table(a[2]);case "htmlselect":return f.t_select(a[2])}return a[0]},parseControlConstructs:function(a){a=a.split(n).join("\n");a=a.replace(h.controlConstructs,function(a,d,c){return f.doControlConstruct([a,d,c])});return a=a.split("\n").join(n)},
parse:function(a){return C.length?f.parseControlConstructs(a.replace(h.specials," ").split(A).join("\t").replace(h.quotes,"\\'").split("\n").join("' + \"\\n\" + '")).replace(h.functions,"Contemplate.$1").replace(h.replacements,"' + ( $1 ) + '").split("\t").join("'; ").split(n).join(" $__p__ += '"):f.parseControlConstructs(a.replace(h.specials," ").split(A).join("\t").replace(h.quotes,"\\'").split("\n").join("' + \"\\n\" + '")).replace(h.replacements,"' + ( $1 ) + '").split("\t").join("'; ").split(n).join(" $__p__ += '")},
getCachedTemplateName:function(a){return $__cacheDir+a.replace(/[ -]/,"_")+".tpl.js"},getCachedTemplateClass:function(a){return"Contemplate_"+a.replace(/[ -]/,"_")+"_Cached"},getTemplateContents:function(a){if(u[a])return x.document.getElementById(u[a]).innerHTML;return""},createTemplateRenderFunction:function(a){f.reset();a="for (var __n__ in $__o__) { if (Contemplate.hasOwn($__o__, __n__)) { $__o__['$'+__n__]=$__o__[__n__]; delete $__o__[__n__];} } var $__p__ = ''; with($__o__) { $__p__ += '"+f.parse(f.getTemplateContents(a))+
"'; } return $__p__;";return new Function("$__o__",a)},createCachedTemplate:function(a,b,d){f.reset();a="(function() { \n/* Contemplate cached template '"+a+"' */ \nvar root=this; if (!root['"+d+"']) { function "+d+"($id) { this.id=$id; }; "+d+".prototype.setId=function($id) { if ($id) {this.id=$id;} return this; }; "+d+".prototype.render=function($__o__) { for (var __n__ in $__o__) { if (Contemplate.hasOwn($__o__, __n__)) { $__o__['$'+__n__]=$__o__[__n__]; delete $__o__[__n__];} } var $__p__ = ''; with($__o__) { $__p__ += '"+
f.parse(f.getTemplateContents(a))+"'; } return $__p__; }; if (typeof exports !== 'undefined') {exports = "+d+";} else {root['"+d+"']="+d+";} } }).call(this);";return f.setCachedTemplate(b,a)},getCachedTemplate:function(a){switch(G){default:return new K(a,f.createTemplateRenderFunction(a))}},setCachedTemplate:function(){return!1},reset:function(){t=B=q=0},merge:function(){var a=Array.prototype.slice.call(arguments);if(!(a.length<1)){for(var b=a.shift(),d=0,c=a.length;d<c;d++){var e=a[d];if(e)for(var h in e)f.hasOwn(e,
h)&&(b[h]=e[h])}return b}},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},hasOwn:function(a,b){return a&&Object.prototype.hasOwnProperty.call(a,b)},log:function(a){x.console&&x.console.log&&console.log(a)}};f.init();typeof exports!=="undefined"?exports=f:this.Contemplate=f}}).call(this);
