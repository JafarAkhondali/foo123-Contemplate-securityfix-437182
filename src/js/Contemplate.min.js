/**
*  Contemplate
*  Light-weight Template Engine for PHP, Python, Node and client-side JavaScript
*
*  @version: 0.6.3
*  https://github.com/foo123/Contemplate
*
*  @inspired by : Simple JavaScript Templating, John Resig - http://ejohn.org/ - MIT Licensed
*  http://ejohn.org/blog/javascript-micro-templating/
*
**/
!function(e,t,n){"object"==typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()}(this,"Contemplate",function(e){"use strict";function t(e,t){var n,r={},i={},o={},u={},a={},s={};if(o[0]="HTML_SPECIALCHARS",o[1]="HTML_ENTITIES",u[0]="ENT_NOQUOTES",u[2]="ENT_COMPAT",u[3]="ENT_QUOTES",a=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":o[e],s=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":u[t],"HTML_SPECIALCHARS"!==a&&"HTML_ENTITIES"!==a)throw new Error("Table: "+a+" not supported");r["38"]="&amp;","HTML_ENTITIES"===a&&(r["160"]="&nbsp;",r["161"]="&iexcl;",r["162"]="&cent;",r["163"]="&pound;",r["164"]="&curren;",r["165"]="&yen;",r["166"]="&brvbar;",r["167"]="&sect;",r["168"]="&uml;",r["169"]="&copy;",r["170"]="&ordf;",r["171"]="&laquo;",r["172"]="&not;",r["173"]="&shy;",r["174"]="&reg;",r["175"]="&macr;",r["176"]="&deg;",r["177"]="&plusmn;",r["178"]="&sup2;",r["179"]="&sup3;",r["180"]="&acute;",r["181"]="&micro;",r["182"]="&para;",r["183"]="&middot;",r["184"]="&cedil;",r["185"]="&sup1;",r["186"]="&ordm;",r["187"]="&raquo;",r["188"]="&frac14;",r["189"]="&frac12;",r["190"]="&frac34;",r["191"]="&iquest;",r["192"]="&Agrave;",r["193"]="&Aacute;",r["194"]="&Acirc;",r["195"]="&Atilde;",r["196"]="&Auml;",r["197"]="&Aring;",r["198"]="&AElig;",r["199"]="&Ccedil;",r["200"]="&Egrave;",r["201"]="&Eacute;",r["202"]="&Ecirc;",r["203"]="&Euml;",r["204"]="&Igrave;",r["205"]="&Iacute;",r["206"]="&Icirc;",r["207"]="&Iuml;",r["208"]="&ETH;",r["209"]="&Ntilde;",r["210"]="&Ograve;",r["211"]="&Oacute;",r["212"]="&Ocirc;",r["213"]="&Otilde;",r["214"]="&Ouml;",r["215"]="&times;",r["216"]="&Oslash;",r["217"]="&Ugrave;",r["218"]="&Uacute;",r["219"]="&Ucirc;",r["220"]="&Uuml;",r["221"]="&Yacute;",r["222"]="&THORN;",r["223"]="&szlig;",r["224"]="&agrave;",r["225"]="&aacute;",r["226"]="&acirc;",r["227"]="&atilde;",r["228"]="&auml;",r["229"]="&aring;",r["230"]="&aelig;",r["231"]="&ccedil;",r["232"]="&egrave;",r["233"]="&eacute;",r["234"]="&ecirc;",r["235"]="&euml;",r["236"]="&igrave;",r["237"]="&iacute;",r["238"]="&icirc;",r["239"]="&iuml;",r["240"]="&eth;",r["241"]="&ntilde;",r["242"]="&ograve;",r["243"]="&oacute;",r["244"]="&ocirc;",r["245"]="&otilde;",r["246"]="&ouml;",r["247"]="&divide;",r["248"]="&oslash;",r["249"]="&ugrave;",r["250"]="&uacute;",r["251"]="&ucirc;",r["252"]="&uuml;",r["253"]="&yacute;",r["254"]="&thorn;",r["255"]="&yuml;"),"ENT_NOQUOTES"!==s&&(r["34"]="&quot;"),"ENT_QUOTES"===s&&(r["39"]="&#39;"),r["60"]="&lt;",r["62"]="&gt;";for(n in r)r.hasOwnProperty(n)&&(i[String.fromCharCode(n)]=r[n]);return i}function n(e,n,r,i){var o=t("HTML_ENTITIES",n),u="";if(e=null==e?"":e+"",!o)return!1;if(n&&"ENT_QUOTES"===n&&(o["'"]="&#039;"),i||null==i)for(u in o)o.hasOwnProperty(u)&&(e=e.split(u).join(o[u]));else e=e.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(e,t,n){for(u in o)o.hasOwnProperty(u)&&(t=t.split(u).join(o[u]));return t+n});return e}function r(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function i(e,t){var n,r=0;if(null===e||"undefined"==typeof e)return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;"COUNT_RECURSIVE"===t&&(t=1),1!=t&&(t=0);for(n in e)e.hasOwnProperty(n)&&(r++,1!=t||!e[n]||e[n].constructor!==Array&&e[n].constructor!==Object||(r+=i(e[n],1)));return r}function o(e){var t,n=function(e){var t=/\W*function\s+([\w\$]+)\s*\(/.exec(e);return t?t[1]:"(Anonymous)"},r=function(e){if(!e||"object"!=typeof e||"number"!=typeof e.length)return!1;var t=e.length;return e[e.length]="bogus",t!==e.length?(e.length-=1,!0):(delete e[e.length],!1)};return e&&"object"==typeof e?(t=null,r(e)||(!t||0!==parseInt(t.local_value,10)&&(!t.local_value.toLowerCase||"off"!==t.local_value.toLowerCase()))&&"[object Object]"===Object.prototype.toString.call(e)&&"Object"===n(e.constructor)):!1}function u(e){var t,n={};if(e&&"object"==typeof e&&e.change_key_case)return e.flip();for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function a(e,t,n){var r="undefined"!=typeof t,i=[],o=!!n,u=!0,a="";if(e&&"object"==typeof e&&e.change_key_case)return e.keys(t,n);for(a in e)e.hasOwnProperty(a)&&(u=!0,r&&(o&&e[a]!==t?u=!1:e[a]!=t&&(u=!1)),u&&(i[i.length]=a));return i}function s(e){var t=[],n="";if(e&&"object"==typeof e&&e.change_key_case)return e.values();for(n in e)t[t.length]=e[n];return t}function c(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],i=function(e,t,n,r){n||(n=" ");var i=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+i:i+e},o=function(e,t,n,r,o,u){var a=r-e.length;return a>0&&(e=n||!o?i(e,r,u,n):e.slice(0,t.length)+i("",a,"0",!0)+e.slice(t.length)),e},u=function(e,t,n,r,u,a,s){var c=e>>>0;return n=n&&c&&{2:"0b",8:"0",16:"0x"}[t]||"",e=n+i(c.toString(t),a||0,"0",!1),o(e,n,r,u,s)},a=function(e,t,n,r,i,u){return null!=r&&(e=e.slice(0,r)),o(e,"",t,n,i,u)},s=function(e,r,s,c,l,_,f){var p,d,h,g,m;if("%%"==e)return"%";for(var O=!1,v="",b=!1,C=!1,E=" ",y=s.length,j=0;s&&y>j;j++)switch(s.charAt(j)){case" ":v=" ";break;case"+":v="+";break;case"-":O=!0;break;case"'":E=s.charAt(j+1);break;case"0":b=!0;break;case"#":C=!0}if(c=c?"*"==c?+t[n++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:0,0>c&&(c=-c,O=!0),!isFinite(c))throw new Error("sprintf: (minimum-)width must be finite");switch(_=_?"*"==_?+t[n++]:"*"==_.charAt(0)?+t[_.slice(1,-1)]:+_:"fFeE".indexOf(f)>-1?6:"d"==f?0:void 0,m=r?t[r.slice(0,-1)]:t[n++],f){case"s":return a(String(m),O,c,_,b,E);case"c":return a(String.fromCharCode(+m),O,c,_,b);case"b":return u(m,2,C,O,c,_,b);case"o":return u(m,8,C,O,c,_,b);case"x":return u(m,16,C,O,c,_,b);case"X":return u(m,16,C,O,c,_,b).toUpperCase();case"u":return u(m,10,C,O,c,_,b);case"i":case"d":return p=+m||0,p=Math.round(p-p%1),d=0>p?"-":v,m=d+i(String(Math.abs(p)),_,"0",!1),o(m,d,O,c,b);case"e":case"E":case"f":case"F":case"g":case"G":return p=+m,d=0>p?"-":v,h=["toExponential","toFixed","toPrecision"]["efg".indexOf(f.toLowerCase())],g=["toString","toUpperCase"]["eEfFgG".indexOf(f)%2],m=d+Math.abs(p)[h](_),o(m,d,O,c,b)[g]();default:return e}};return r.replace(e,s)}function l(e,t){t=t?(t+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \\s ";var n=new RegExp("^["+t+"]+","g");return(e+"").replace(n,"")}function _(e,t){t=t?(t+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1"):" \\s ";var n=new RegExp("["+t+"]+$","g");return(e+"").replace(n,"")}function f(e,t){var n,r=0,i=0;for(e+="",t?(t+="",n=t.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")):n=" \n\r	\f            ​\u2028\u2029　",r=e.length,i=0;r>i;i++)if(-1===n.indexOf(e.charAt(i))){e=e.substring(i);break}for(r=e.length,i=r-1;i>=0;i--)if(-1===n.indexOf(e.charAt(i))){e=e.substring(0,i+1);break}return-1===n.indexOf(e.charAt(0))?e:""}function p(){return Math.floor((new Date).getTime()/1e3)}function d(e,t){var n,r,i,o=/\\?([a-z])/gi,u=function(e,t){return e=e.toString(),e.length<t?u("0"+e,t,"0"):e},a=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"];i=function(e,t){return r[e]?r[e]():t},r={d:function(){return u(r.j(),2)},D:function(){return r.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return a[r.w()]+"day"},N:function(){return r.w()||7},S:function(){var e=r.j();return 4>e|e>20&&(["st","nd","rd"][e%10-1]||"th")},w:function(){return n.getDay()},z:function(){var e=new Date(r.Y(),r.n()-1,r.j()),t=new Date(r.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(r.Y(),r.n()-1,r.j()-r.N()+3),t=new Date(e.getFullYear(),0,4);return u(1+Math.round((e-t)/864e5/7),2)},F:function(){return a[6+r.n()]},m:function(){return u(r.n(),2)},M:function(){return r.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(r.Y(),r.n(),0).getDate()},L:function(){var e=r.Y();return 0===e%4&0!==e%100|0===e%400},o:function(){var e=r.n(),t=r.W(),n=r.Y();return n+(12===e&&9>t?1:1===e&&t>9?-1:0)},Y:function(){return n.getFullYear()},y:function(){return r.Y().toString().slice(-2)},a:function(){return n.getHours()>11?"pm":"am"},A:function(){return r.a().toUpperCase()},B:function(){var e=3600*n.getUTCHours(),t=60*n.getUTCMinutes(),r=n.getUTCSeconds();return u(Math.floor((e+t+r+3600)/86.4)%1e3,3)},g:function(){return r.G()%12||12},G:function(){return n.getHours()},h:function(){return u(r.g(),2)},H:function(){return u(r.G(),2)},i:function(){return u(n.getMinutes(),2)},s:function(){return u(n.getSeconds(),2)},u:function(){return u(1e3*n.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var e=new Date(r.Y(),0),t=Date.UTC(r.Y(),0),n=new Date(r.Y(),6),i=Date.UTC(r.Y(),6);return e-t!==n-i?1:0},O:function(){var e=n.getTimezoneOffset(),t=Math.abs(e);return(e>0?"-":"+")+u(100*Math.floor(t/60)+t%60,4)},P:function(){var e=r.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,i)},r:function(){return"D, d M Y H:i:s O".replace(o,i)},U:function(){return 0|n/1e3}};var s=function(e,t){return n=void 0===t?new Date:t instanceof Date?new Date(t):new Date(1e3*t),e.replace(o,i)};return s(e,t)}function h(e,t,n){for(var r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=d(t,n),o=0,u=r.length;u>o;o++)e[r[o]]&&(i=i.replace(r[o],e[r[o]]));return i}function g(e,t,n){var r;return r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.open(e,t,!1),r.send(n),200===r.status?r.responseText:""}var m,O="0.6.3",v=Object.prototype,b=Array.prototype,C=Function.prototype,E=C.call.bind(v.toString),y=C.call.bind(v.hasOwnProperty),j=C.call.bind(b.slice),T="undefined"!=typeof global&&"[object global]"==E(global),A=function(e){return"[object Array]"===E(e)||e instanceof Array},S=T?require("fs"):null,w=S?S.writeFileSync:null,D=S?S.readFileSync:null,N=S?S.existsSync:null,M=S?S.statSync:null;if(S?S.realpathSync:null,!b.indexOf){var k=Math.abs;b.indexOf=function(e,t){var n,r,i=t?t:0;if(!this)throw new TypeError;if(r=this.length,0===r||i>=r)return-1;for(0>i&&(i=r-k(i)),n=i;r>n;n++)if(this[n]===e)return n;return-1}}var I=!1,x={},U={},L=0,P="./",R={},H={},F={},B={},K="<%",$="%>",Y="",q="",G="",z="' + \"\\n\" + '",J="",X=T?require("os").EOL:"\n",W=!0,Z=null,Q=0,V="    ",et=0,tt=0,nt=0,rt=0,it=0,ot=[],ut=[],at=null,st=0,ct=/[ -]/g,lt=/\n\r|\r\n|\n|\r/g,_t=/^[a-zA-Z_]/,ft=/^[0-9]/,pt=/^[a-zA-Z0-9_]/i,dt=/^\s/,ht={specials:null,replacements:null,functions:null,controls:null,controls2:null},gt=["include","template","extends","endblock","block","elsefor","endfor","for","set","unset","isset","elseif","else","endif","if"],mt=["htmlselect","htmltable","plugin_([a-zA-Z0-9_]+)","haskey","lowercase","uppercase","camelcase","snakecase","pluralise","concat","ltrim","rtrim","trim","sprintf","addslashes","stripslashes","tpl","uuid","html","url","count","ldate","date","now","locale","dq","q","l","s","n","f"],Ot={},vt=function(e,t){if("undefined"==typeof t&&(t=Q),t>=0){t=0===t?t:t+1;var n,r,i=new Array(t).join(V);for(e=e.split(lt),r=e.length,n=0;r>n;n++)e[n]=i+e[n];return e.join(X)}return e},bt=function(){var e=j(arguments);if(!(e.length<1)){var t,n,r,i=e.shift(),o=e.length;for(t=0;o>t;t++)if(r=e[t])for(n in r)y(r,n)&&(i[n]=r[n]);return i}},Ct=function(e,t){var n,r;if(t)r=f(t).split(" "),K=f(r[0]),$=f(r[1]);else{for(n=e.split("\n");n.length&&!f(n[0]).length;)n.shift();n.length&&(r=f(n.shift()).split(" "),K=f(r[0]),$=f(r[1])),e=n.join("\n")}return e},Et=function(e){return B[e]?B[e]:H[e]?T&&S?D(H[e],{encoding:m.ENCODING}):"#"===H[e].charAt(0)?window.document.getElementById(H[e].substring(1)).innerHTML:g("GET",H[e]):""},yt=function(e){return' ( "undefined" !== typeof('+e+") ) "},jt=function(e){e=e.split(",");var t=f(e.shift()),n=f(e.join(","));return"';"+X+vt(t+" = ("+n+");")+X},Tt=function(e){return e&&e.length?(e=f(e),"';"+X+vt('if ( "undefined" !== typeof ('+e+") ) delete "+e+";")+X):"'; "+X},At=function(e){var t,n;return nt++,t="';",n=rn().split("__{{COND}}__").join(e),t+=vt(n),Q++,t},St=function(e){var t,n;return t="';",n=on().split("__{{COND}}__").join(e),Q--,t+=vt(n),Q++,t},wt=function(){var e,t;return e="';",t=un(),Q--,e+=vt(t),Q++,e},Dt=function(){var e,t;return nt--,e="';",t=an(),Q--,e+=vt(t)},Nt=function(e){var t,n;tt++,rt++,e=e.split(" as ");var r=f(e[0]),i=e[1].split("=>"),o=f(i[0])+"__RAW__",u=f(i[1])+"__RAW__",a="_loopObj"+ ++et,s={"__{{FOR_EXPR_O}}__":r,"__{{O}}__":a,"__{{K}}__":o,"__{{V}}__":u,"__{{ASSIGN1}}__":"var "+u+" = "+a+"["+o+"];","__{{ASSIGN2}}__":"__instance__.data['"+o+"'] = "+o+"; __instance__.data['"+u+"'] = "+u+";"};t="';",n=sn();for(var o in s)n=n.split(o).join(s[o]);return t+=vt(n),Q+=3,t},Mt=function(){var e,t;return rt--,e="';",t=cn(),Q+=-3,e+=vt(t),Q+=1,e},kt=function(){var e,t;return e="';",rt==tt?(tt--,rt--,t=ln(),Q+=-3,e+=vt(t)):(tt--,t=_n(),Q+=-1,e+=vt(t))},It=function(e){return F[e]||(Qt(),Zt(),F[e]=" "+Yt(Ct(Et(e)),!1)+"'; "+X,Vt()),vt(F[e])},xt=function(e){e=e.split(",");var t=f(e.shift()),n=e.join(",");return"' + %tpl( \""+t+'", '+n+" ); "+X},Ut=function(e){return at=e,"'; "+X},Lt=function(e){return e=f(e),0>ut.indexOf(e)&&ut.push(e),it++,ot.push(e),"' +  __||"+e+"||__"},Pt=function(){return it?(it--,"__||/"+ot.pop()+"||__"):""},Rt=function(e){var t,n,r,i,o;for(t=e.split(K),n=t.length,r=[],i=0;n>i;i++)o=t[i].split($),r.push(o[0]),o.length>1&&r.push(o[1]);return r},Ht=function(e,t,n){if(t)switch(n=n||"",t){case"isset":return n=n.replace(ht.controls2,Ht),yt(n);case"set":return n=n.replace(ht.controls2,Ht),jt(n);case"unset":return n=n.replace(ht.controls2,Ht),Tt(n);case"if":return n=n.replace(ht.controls2,Ht),At(n);case"elseif":return n=n.replace(ht.controls2,Ht),St(n);case"else":return wt(n);case"endif":return Dt(n);case"for":return n=n.replace(ht.controls2,Ht),Nt(n);case"elsefor":return Mt(n);case"endfor":return kt(n);case"extends":return Ut(n);case"block":return Lt(n);case"endblock":return Pt(n);case"template":return n=n.replace(ht.controls2,Ht),xt(n);case"include":return It(n)}return e},Ft=function(e,t){var n,r,i,o,u,a,s,c,l=t?t.length:0;if(l>0)for(;l--;)for(n=t[l],r="__||"+n+"||__",i="__||/"+n+"||__",o=r.length,u=o+1,a=e.indexOf(r,0),s=e.indexOf(i,a+o),c=a>-1;c;)e=e.substr(0,a)+"__instance__.renderBlock( '"+n+"' ); "+e.substr(s+u),c=-1<(a=e.indexOf(r,0)),s=c?e.indexOf(i,a+o):0;return e},Bt=function(e){for(var t,n,r,i,o,u,a,s,c,l,_={},f=ut.length;f--;)for(t=ut[f],r="__||"+t+"||__",i="__||/"+t+"||__",o=r.length,u=o+1,a=e.indexOf(r,0),s=e.indexOf(i,a+o),n=e.substr(a,s-a+u),n.length&&(n=Ft(n.substring(o,n.length-u),ut),c=nn().split("__{{CODE}}__").join(vt(n+"';",0)),_[t]=c),l=a>-1;l;)e=e.substr(0,a)+"__instance__.renderBlock( '"+t+"' ); "+e.substr(s+u),l=-1<(a=e.indexOf(r,0)),s=l?e.indexOf(i,a+o):0;return ut=[],[e,_]},Kt=function(e,t,n,r){for(var i=t,o=!1,u="";r>n&&(u=e[n++],i+=u,t!=u||o);)o=!o&&"\\"==u;return i},$t=function(e,t,n,r){if(r=r||"VARSTR",_t.test(e[t])){var i,o,u,a,s,c,l,_,f,p,d,h=0,g={},m=[],O=0;for(o=e[t++];n>t&&pt.test(e[t]);)o+=e[t++];for(a=o,o="__instance__.data['"+o+"']",s=a.length,O=0;n>t&&dt.test(e[t]);)O++,t++;for(l=0;n>t&&("."==e[t]||"["==e[t]);){for(_=e[t++];n>t&&dt.test(e[t]);)O++,t++;if("."==_){for(u="";n>t&&pt.test(e[t]);)u+=e[t++];if(c=u.length,!c)break;o+="['"+u+"']",s+=O+1+c,O=0}else if("["==_){if(l++,f=e[t],'"'==f||"'"==f)u=Kt(e,f,t+1,n),h++,p="__##"+r+h+"##__",g[p]=u,o+=_+p,c=u.length,t+=c,s+=O+1+c,O=0;else if(ft.test(f)){for(u=e[t++];n>t&&ft.test(e[t]);)u+=e[t++];o+=_+u,c=u.length,s+=O+1+c,O=0}else if("$"==f)d=e.slice(t+1),i=$t(d,0,d.length,r+"_"+h+"_"),i&&(u=i[i.length-1],o+=_+u[0][0],c=u[1],t+=c+1,s+=O+2+c,O=0,m=m.concat(i));else{if("]"!=f)break;if(!(l>0))break;l--,o+=_+e[t++],s+=O+2,O=0}for(;n>t&&dt.test(e[t]);)O++,t++;if("]"==e[t]){if(!(l>0))break;l--,o+=e[t++],s+=O+1,O=0}}for(;n>t&&dt.test(e[t]);)O++,t++}return m.push([[o,a],s,g]),m}return null},Yt=function(e,t){var n,r,i,o,u,a,s,c,l,_,f,p,d,h,g,O,v,b,C=function(e,t,n){return n&&Ot[n]?"Contemplate.plugin_"+n:"Contemplate."+t};for(n=Rt(e),r=n.length,a=!1,i="",u=0;r>u;u++){if(o=n[u],a){for(s="	"+o.replace(ht.specials," ")+"",f=s.length,l={},c={},p=0,d="",h="",g=0;f>p;)if(d=s[p++],'"'==d||"'"==d)O=Kt(s,d,p,f),g++,_="__##STR"+g+"##__",c[_]=O,h+=_,p+=O.length-1;else if("$"==d)if(O=$t(s,p,f)){for(v=0;v<O.length;v++)b=O[v],g++,_="__##VAR"+g+"##__",l[_]=b[0],c=m.merge(c,b[2]);h+=_,p+=b[1]}else h+="$";else h+=d;s=h,s=s.replace(ht.controls,Ht).replace(ht.functions,C).replace(ht.replacements,"' + ( $1 ) + '");for(_ in l)s=s.split(_+"__RAW__").join(l[_][1]),s=s.split(_).join(l[_][0]);for(_ in c)s=s.split(_).join(c[_]);o=s.split("	").join(Y).split("").join(vt(q)),a=!1}else W&&(o=o.split("\\").join("\\\\")),o=o.split("'").join("\\'").split(/\n/).join(J),a=!0;i+=o}return"undefined"==typeof t&&(t=!0),t?Bt(i):i},qt=function(e){return P+e.replace(ct,"_")+"_tpl.js"},Gt=function(e){return"Contemplate_"+e.replace(ct,"_")+"_Cached"},zt=function(e,t){Zt();var n,r,i=Yt(Ct(Et(e),t)),o={};r=at?fn:pn().split("__{{CODE}}__").join(vt("__p__ += '"+i[0]+"';",0));for(n in i[1])o[n]=new Function("__instance__",i[1][n]);return[new Function("__instance__",r),o]},Jt=function(e,t,n,r){Zt();var i,o,u,a,s,c=Yt(Ct(Et(e),r));a=[];for(u in c[1])s=X+tn().split("__{{BLOCK}}__").join(u).split("__{{BLOCKMETHOD}}__").join(u).split("__{{BLOCKMETHODCODE}}__").join(vt(c[1][u],1)),a.push(s);a=a.length?X+"_blocks = { "+X+vt(a.join(","+X),1)+X+"};"+X:"",at?(i="this.setParent( '"+at+"' );",o=dn):(i="",o=hn().split("__{{CODE}}__").join(vt("__p__ += '"+c[0]+"';",0)));var l;l=G?G:"";var _=en().split("__{{PREFIX_CODE}}__").join(l).split("__{{ID}}__").join(e).split("__{{CLASSNAME}}__").join(n).split("__{{PARENTCODE}}__").join(vt(i,2)).split("__{{BLOCKS}}__").join(vt(a,2)).split("__{{RENDERCODE}}__").join(vt(o,4));return Wt(t,_)},Xt=function(e,t){if(t=t||{},B[e]){var n=zt(e,t.separators),r=new gn(e,n[0]).setBlocks(n[1]);return at&&r.setParent(m.tpl(at)),r}if(T||(L=m.CACHE_TO_DISK_NONE),!0!==t.autoUpdate&&m.CACHE_TO_DISK_NOUPDATE===L){var i=qt(e),o=Gt(e);if(N(i)||Jt(e,i,o,t.separators),N(i)){var u=require(i),r=(new u).setId(e);return r}return null}if(!0===t.autoUpdate||m.CACHE_TO_DISK_AUTOUPDATE===L){var i=qt(e),o=Gt(e);if(N(i)){var a=M(i),s=M(H[e]);a.mtime.getTime()<=s.mtime.getTime()&&Jt(e,i,o,t.separators)}else Jt(e,i,o,t.separators);if(N(i)){var u=require(i),r=(new u).setId(e);return r}return null}var n=zt(e,t.separators),r=new gn(e,n[0]).setBlocks(n[1]);return at&&r.setParent(m.tpl(at)),r},Wt=function(e,t){return w(e,t,{encoding:m.ENCODING})},Zt=function(){tt=0,nt=0,rt=0,Q=0,it=0,ot=[],ut=[],at=null},Qt=function(){Z.push([tt,nt,rt,Q,it,ot,ut,at])},Vt=function(){var e=Z.pop();tt=e[0],nt=e[1],rt=e[2],Q=e[3],it=e[4],ot=e[5],ut=e[6],at=e[7]},en=function(e){return e=e||X,["__{{PREFIX_CODE}}__","!function (root, moduleName, moduleDefinition) {","","    //","    // export the module","","    // node, CommonJS, etc..","    if ( 'object' == typeof(module) && module.exports ) module.exports = moduleDefinition();","","    // AMD, etc..","    else if ( 'function' == typeof(define) && define.amd ) define( moduleDefinition );","","    // browser, etc..","    else root[ moduleName ] = moduleDefinition();","","","}(this, '__{{CLASSNAME}}__', function( ) {","   /* Contemplate cached template '__{{ID}}__' */","   /* quasi extends main Contemplate class */","   ","   /* This is NOT used, Contemplate is accessible globally */","   /* var self = require('Contemplate'); */","   ","   /* constructor */","   function __{{CLASSNAME}}__(id)","   {","       /* initialize internal vars */","       var _parent = null, _blocks = null;","       ","       this.id = id;","       this.data = null;","       ","       ","       /* tpl-defined blocks render code starts here */","__{{BLOCKS}}__","       /* tpl-defined blocks render code ends here */","       ","       /* template methods */","       ","       this.setId = function(id) {","           if ( id ) this.id = id;","           return this;","       };","       ","       this.setParent = function(parent) {","           if ( parent )","           {","               if ( parent.substr )","                   _parent = Contemplate.tpl( parent );","               else","                   _parent = parent;","           }","           return this;","       };","       ","       /* render a tpl block method */","       this.renderBlock = function(block, __instance__) {","           if ( !__instance__ ) __instance__ = this;","           if ( _blocks && _blocks[block] ) return _blocks[block](__instance__);","           else if ( _parent ) return _parent.renderBlock(block, __instance__);","           return '';","       };","       ","       /* tpl render method */","       this.render = function(data, __instance__) {","           if ( !__instance__ ) __instance__ = this;","           var __p__ = '';","           if ( _parent )","           {","               __p__ = _parent.render(data, __instance__);","           }","           else","           {","               /* tpl main render code starts here */","__{{RENDERCODE}}__","               /* tpl main render code ends here */","           }","           this.data = null;","           return __p__;","       };","       ","       /* parent tpl assign code starts here */","__{{PARENTCODE}}__","       /* parent tpl assign code ends here */","   };","   ","   ","    // export it","    return __{{CLASSNAME}}__;","});",""].join(e)},tn=function(e){return e=e||X,["","/* tpl block render method for block '__{{BLOCK}}__' */","'__{{BLOCKMETHOD}}__': function(__instance__) {","__{{BLOCKMETHODCODE}}__","}",""].join(e)},nn=function(e){return e=e||X,["","var __p__ = '';","__{{CODE}}__","return __p__;",""].join(e)},rn=function(e){return e=e||X,["","if ( __{{COND}}__ )","{","",""].join(e)},on=function(e){return e=e||X,["","}","else if ( __{{COND}}__ )","{","",""].join(e)},un=function(e){return e=e||X,["","}","else","{","",""].join(e)},an=function(e){return e=e||X,["","}","",""].join(e)},sn=function(e){return e=e||X,["","var __{{O}}__ = __{{FOR_EXPR_O}}__;","if ( __{{O}}__ && Object.keys(__{{O}}__).length )","{","   var __{{K}}__;","   for ( __{{K}}__ in __{{O}}__ )","   {","       if ( Contemplate.hasOwn(__{{O}}__, __{{K}}__) )","       {","          __{{ASSIGN1}}__","          __{{ASSIGN2}}__","       ",""].join(e)},cn=function(e){return e=e||X,["","       }","   }","}","else","{  ","    ",""].join(e)},ln=function(e){return e=e||X,["","       }","   }","}","",""].join(e)},_n=function(e){return e=e||X,["","}","",""].join(e)},fn="return '';",pn=function(e){return e=e||X,["","var __p__ = '';","__{{CODE}}__","return __p__;",""].join(e)},dn="__p__ = '';",hn=function(e){return e=e||X,["","__instance__.data = Contemplate.data( data );","__{{CODE}}__",""].join(e)},gn=function(e,t){var n=null,r=null,i=null;this.id=null,this.data=null,e&&(this.id=e,n=t),this.setId=function(e){return e&&(this.id=e),this},this.setParent=function(e){return e&&(r=e.substr?Contemplate.tpl(e):e),this},this.setRenderFunction=function(e){return n=e,this},this.setBlocks=function(e){return i||(i={}),i=Contemplate.merge(i,e),this},this.renderBlock=function(e,t){return t||(t=this),i&&i[e]?i[e](t):r?r.renderBlock(e,t):""},this.render=function(e,t){var i="";return t||(t=this),r?i=r.render(e,t):n&&(t.data=Contemplate.data(e),i=n(t)),this.data=null,i}};return m={VERSION:O,CACHE_TO_DISK_NONE:0,CACHE_TO_DISK_AUTOUPDATE:2,CACHE_TO_DISK_NOUPDATE:4,ENCODING:"utf8",init:function(){I||(Z=[],ht.specials=new RegExp("[\\n\\r\\v\\t]","g"),ht.replacements=new RegExp("\\t[ ]*(.*?)[ ]*\\v","g"),ht.controls=new RegExp("\\t[ ]*%("+gt.join("|")+")\\b[ ]*\\((.*)\\)","g"),ht.controls2=new RegExp("%("+gt.join("|")+")\\b[ ]*\\((.*)\\)","g"),ht.functions=new RegExp("%("+mt.join("|")+")\\b","g"),J=z,Y="'; "+X,q=X+"__p__ += '",I=!0)},addPlugin:function(e,t){e&&t&&(Ot[e]=!0,m["plugin_"+e]=t)},setPrefixCode:function(e){e&&(G=""+e)},setLocaleStrings:function(e){x=m.merge(x,e)},clearLocaleStrings:function(){x={}},setPlurals:function(e){if(e){for(var t in e)null==e[t]&&(e[t]=t+"s");U=m.merge(U,e)}},clearPlurals:function(){U={}},setTemplateSeparators:function(e){e&&(e.left&&(K=""+e.left),e.right&&($=""+e.right))},setPreserveLines:function(e){"undefined"==typeof e&&(e=!0),J=e?z:""},setCacheDir:function(e){P=_(e,"/")+"/"},setCacheMode:function(e){L=T?e:m.CACHE_TO_DISK_NONE},clearCache:function(e){R={},e&&(F={})},add:function(e,t){if("object"==typeof e){for(var n in e)A(e[n])&&(e[n][0]&&(B[n]=e[n][0]),delete e[n]);H=m.merge(H,e)}else e&&t&&(H[e]=t)},addInline:function(e,t){"object"==typeof e?B=m.merge(B,e):e&&t&&(B[e]=t)},tpl:function(e,t,n){n=bt({autoUpdate:!1,refresh:!1,escape:!0,separators:null},n),W=!1===n.escape?!1:!0,(n.refresh||!R[e])&&(R[e]=Xt(e,n));var r=R[e];return t&&"object"==typeof t?r.render(t):r},html:function(e){return n(e,"ENT_COMPAT","UTF-8")},url:r,count:i,haskey:function(t){var n=E(t);if(!t||"[object Array]"!=n&&"[object Object]"!=n)return!1;var r,i,o,u=j(arguments);for(u.shift(),r=u.length,o=t,i=0;r>i;i++){if(e===o[u[i]])return!1;o=o[u[i]]}return!0},q:function(e){return"'"+e+"'"},dq:function(e){return'"'+e+'"'},s:function(e){return String(""+e)},n:function(e){return parseInt(e,10)},f:function(e){return parseFloat(e,10)},addslashes:function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},stripslashes:function(e){return(e+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return t}})},concat:function(){return j(arguments).join("")},trim:f,ltrim:l,rtrim:_,ucfirst:function(e){return e[0].toUpperCase()+e.substr(1)},lcfirst:function(e){return e[0].toLowerCase()+e.substr(1)},lowercase:function(e){return e.toLowerCase()},uppercase:function(e){return e.toUpperCase()},camelcase:function(e,t,n){return t=t||"_",n?e.split(t).map(m.ucfirst).join(""):m.lcfirst(e.split(t).map(m.ucfirst).join(""))},snakecase:function(e,t){return t=t||"_",e.replace(/([A-Z])/g,t+"$1").toLowerCase()},sprintf:c,time:p,date:function(e,t){return t||(t=p()),d(e,t)},ldate:function(e,t){return t||(t=p()),h(x,e,t)},locale:function(e){return y(x,e)?x[e]:e},pluralise:function(e,t){return U[e]?1!==t?U[e]:e:e},uuid:function(e){return[e||"UUID",++st,p()].join("_")},htmltable:function(e,t){e=m.merge({},e),t=m.merge({},t||{});var n,r,i,u,c,l,_,f,p,d="",h="",g="",O="",v=[],b=!1;if(d="<table",t.id&&(d+=" id='"+t.id+"'"),t["class"]&&(d+=" class='"+t["class"]+"'"),t.style&&(d+=" style='"+t.style+"'"),t.data)for(n in t.data)m.hasOwn(t.data,n)&&(d+=" data-"+n+"='"+t.data[n]+"'");d+=">",h="",(t.header||t.footer)&&(h="<td>"+a(e).join("</td><td>")+"</td>"),g="",t.header&&(g="<thead><tr>"+h+"</tr></thead>"),O="",t.footer&&(O="<tfoot><tr>"+h+"</tr></tfoot>"),d+=g,v=[],c=s(e);for(r in c)if(m.hasOwn(c,r))for(l=c[r],o(l)||(l=[l]),_=s(l),i=0,u=_.length;u>i;i++)v[i]||(v[i]=new Array(u)),v[i][r]=_[i];for(f=t.odd?t.odd:"odd",p=t.even?t.even:"even",b=!1,r=0,u=v.length;u>r;r++)d+=b?"<tr class='"+f+"'><td>"+v[r].join("</td><td>")+"</td></tr>":"<tr class='"+p+"'><td>"+v[r].join("</td><td>")+"</td></tr>",b=!b;return v=null,d+=O,d+="</table>"},htmlselect:function(e,t){e=m.merge({},e),t=m.merge({},t||{});var n,r,i,a,s="";if(s="<select",t.multiple&&(s+=" multiple"),t.disabled&&(s+=" disabled='disabled'"),t.name&&(s+=" name='"+t.name+"'"),t.id&&(s+=" id='"+t.id+"'"),t["class"]&&(s+=" class='"+t["class"]+"'"),t.style&&(s+=" style='"+t.style+"'"),t.data)for(n in t.data)m.hasOwn(t.data,n)&&(s+=" data-"+n+"='"+t.data[n]+"'");s+=">",t.selected?(o(t.selected)||(t.selected=[t.selected]),t.selected=u(t.selected)):t.selected={},t.optgroups&&(o(t.optgroups)||(t.optgroups=[t.optgroups]),t.optgroups=u(t.optgroups));for(n in e)if(m.hasOwn(e,n))if(i=e[n],t.optgroups&&t.optgroups[n]){s+="<optgroup label='"+n+"'>";for(r in i)m.hasOwn(i,r)&&(a=i[r],t.use_key?a=r:t.use_value&&(r=a),s+=m.hasOwn(t.selected,r)?"<option value='"+r+"' selected='selected'>"+a+"</option>":"<option value='"+r+"'>"+a+"</option>");s+="</optgroup>"}else t.use_key?i=n:t.use_value&&(n=i),s+=t.selected[n]?"<option value='"+n+"' selected='selected'>"+i+"</option>":"<option value='"+n+"'>"+i+"</option>";return s+="</select>"},getTemplateContents:Et,hasOwn:function(e,t){return e&&y(e,t)},merge:bt,data:function(e){if(A(e))return e.slice();var t,n,r={};for(t in e)y(e,t)&&(n=t,r[n]=e[t]);return r}},m.now=m.time,m.l=m.locale,m.init(),T&&(global.Contemplate=m),m});